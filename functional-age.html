<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Functional Age Diagnostic | Academic Athlete Lab</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <style>
        @import url('https://fonts.googleapis.com/css2?family=Space+Mono:wght@400;700&family=Inter:wght@900&display=swap');
        body { background-color: #050505; color: #fff; font-family: 'Space Mono', monospace; -webkit-font-smoothing: antialiased; }
        .glass-card { background: #111; border: 1px solid #222; }
        .safety-cyan { color: #22d3ee; }
        .bg-cyan { background-color: #22d3ee; }
        .nav-link { font-size: 10px; font-weight: 900; text-transform: uppercase; letter-spacing: 0.2em; }
        .toggle-active { background-color: #22d3ee !important; color: #000 !important; }
        select { appearance: none; background-image: url("data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' fill='none' viewBox='0 0 24 24' stroke='%2322d3ee'%3E%3Cpath stroke-linecap='round' stroke-linejoin='round' stroke-width='2' d='M19 9l-7 7-7-7'%3E%3C/path%3E%3C/svg%3E"); background-repeat: no-repeat; background-position: right 1rem center; background-size: 1rem; }
        input[type="number"]::-webkit-inner-spin-button, input[type="number"]::-webkit-outer-spin-button { -webkit-appearance: none; margin: 0; }
    </style>
</head>
<body class="min-h-screen flex flex-col" onload="initPage()">

<header class="p-6 border-b border-neutral-900 bg-black">
    <div class="max-w-6xl mx-auto flex justify-between items-center">
        <h1 class="text-xl font-black tracking-tighter safety-cyan italic uppercase">ACADEMIC<span class="text-white">ATHLETE</span>LAB</h1>
        <div class="flex bg-neutral-900 rounded-lg p-1">
            <button id="unit-lbs" onclick="setUnit('LBS')" class="px-4 py-1.5 text-[10px] font-bold rounded-md transition-all">LBS</button>
            <button id="unit-kg" onclick="setUnit('KG')" class="px-4 py-1.5 text-[10px] font-bold rounded-md transition-all">KG</button>
        </div>
    </div>
</header>

<nav class="bg-black border-b border-neutral-900 py-4 px-6 sticky top-0 z-[100] backdrop-blur-md bg-black/80">
    <div class="max-w-6xl mx-auto flex gap-8">
        <a href="index.html" class="nav-link text-neutral-500 hover:text-white transition-colors">1RM Calculator</a>
        <a href="athlete-lab.html" class="nav-link text-neutral-500 hover:text-white transition-colors">Athlete Lab Logs</a>
        <a href="functional-age.html" class="nav-link text-cyan-400 border-b-2 border-cyan-400 pb-1">Functional Age</a>
    </div>
</nav>

<main class="max-w-4xl mx-auto p-6 md:p-12 w-full">
    <header class="mb-12">
        <div class="inline-block bg-cyan text-black px-4 py-1 font-black italic text-2xl uppercase mb-4">
            Biological Age Diagnostic
        </div>
        <p class="text-neutral-500 text-[10px] tracking-[0.4em] uppercase">Relative Strength Standard v1.3 | 50+ Niche</p>
    </header>

    <div class="grid md:grid-cols-2 gap-8 items-start">
        <section class="glass-card p-8 rounded-3xl border-l-4 border-cyan-500">
            <h3 class="text-xs font-bold uppercase safety-cyan mb-6 tracking-widest text-left">Diagnostic Inputs</h3>
            <div class="space-y-6 text-left">
                <div>
                    <label class="block text-[10px] uppercase text-neutral-500 font-bold mb-2">Select Movement</label>
                    <select id="lift-type" onchange="calculateBioAge()" class="bg-black border border-neutral-800 w-full p-4 rounded-xl text-cyan-400 font-bold outline-none focus:border-cyan-400 cursor-pointer">
                        <option value="bench">Bench Press (Upper Power)</option>
                        <option value="squat">Back Squat (Lower Drive)</option>
                        <option value="deadlift" selected>Deadlift (Hinge/Posterior)</option>
                        <option value="db_press">DB Shoulder Press (Stability)</option>
                    </select>
                </div>
                <div>
                    <label class="block text-[10px] uppercase text-neutral-500 font-bold mb-2">Chronological Age</label>
                    <input type="number" id="chron-age" value="55" class="bg-black border border-neutral-800 w-full p-4 rounded-xl text-cyan-400 font-bold outline-none focus:border-cyan-400">
                </div>
                <div>
                    <label class="block text-[10px] uppercase text-neutral-500 font-bold mb-2">Bodyweight (<span class="unit-label">LBS</span>)</label>
                    <input type="number" id="bodyweight" placeholder="Enter Weight" class="bg-black border border-neutral-800 w-full p-4 rounded-xl text-cyan-400 font-bold outline-none focus:border-cyan-400">
                </div>
                <div>
                    <label class="block text-[10px] uppercase text-neutral-500 font-bold mb-2">Estimated 1RM (<span class="unit-label">LBS</span>)</label>
                    <input type="number" id="one-rm" placeholder="Max Lift" class="bg-black border border-neutral-800 w-full p-4 rounded-xl text-cyan-400 font-bold outline-none focus:border-cyan-400">
                    <p id="db-note" class="hidden text-[9px] text-neutral-600 mt-2 italic">*Enter TOTAL weight of both dumbbells.</p>
                </div>
                <button onclick="calculateBioAge()" class="w-full bg-cyan-500 hover:bg-cyan-400 text-black font-black py-4 rounded-xl uppercase tracking-widest transition-all shadow-lg shadow-cyan-900/20">Analyze Strength Age</button>
            </div>
        </section>

        <section class="glass-card p-8 rounded-3xl flex flex-col justify-center text-center min-h-[450px]">
            <div id="age-display" class="hidden text-left">
                <span class="text-[10px] text-neutral-500 uppercase tracking-widest block mb-2">Estimated Strength Age:</span>
                <div id="bio-age-val" class="text-8xl font-black safety-cyan tracking-tighter mb-4 text-center">--</div>
                <div id="age-status" class="mb-4"></div>
                <div class="mt-8 pt-8 border-t border-neutral-900">
                    <p id="bio-feedback" class="text-sm text-neutral-400 italic leading-relaxed"></p>
                </div>
                <button onclick="window.print()" class="mt-6 text-[9px] text-neutral-600 uppercase font-bold tracking-widest border border-neutral-800 px-4 py-2 rounded-lg hover:border-cyan-500 hover:text-cyan-500 transition-all">Save Report as PDF</button>
            </div>
            <div id="age-placeholder" class="text-neutral-600 italic">Configure profile to generate diagnostic...</div>
        </section>
    </div>

    <section class="mt-12 bg-cyan-950/20 border border-cyan-500/30 p-8 rounded-3xl text-left">
        <h4 class="text-cyan-400 font-bold uppercase text-xs mb-4 italic">Is your strength age higher than your real age?</h4>
        <p class="text-sm text-neutral-300 mb-6 leading-relaxed">Download the <strong class="text-white">"Age-Reversal Strength Blueprint"</strong>. A science-based 12-week protocol for athletes 50+ to reclaim power and protect joint longevity.</p>
        <div class="flex flex-col sm:flex-row gap-4">
            <input type="email" placeholder="Enter email for the PDF" class="bg-black border border-neutral-800 p-4 rounded-xl flex-grow text-sm outline-none focus:border-cyan-400 text-cyan-400">
            <button class="bg-white text-black font-black px-8 py-4 rounded-xl uppercase text-xs tracking-widest hover:bg-cyan-400 transition-all">Get Blueprint</button>
        </div>
    </section>
</main>

<script>
    let currentUnit = localStorage.getItem('athleteUnit') || 'LBS';
    const KG_RATIO = 2.20462;

    function initPage() {
        setUnit(currentUnit);
        syncData();
    }

    function setUnit(u) {
        const weightInput = document.getElementById('bodyweight');
        const maxInput = document.getElementById('one-rm');
        let bw = parseFloat(weightInput.value);
        let mx = parseFloat(maxInput.value);

        if(bw || mx) {
            if(currentUnit === 'LBS' && u === 'KG') {
                if(bw) weightInput.value = (bw / KG_RATIO).toFixed(1);
                if(mx) maxInput.value = (mx / KG_RATIO).toFixed(1);
            }
            if(currentUnit === 'KG' && u === 'LBS') {
                if(bw) weightInput.value = (bw * KG_RATIO).toFixed(1);
                if(mx) maxInput.value = (mx * KG_RATIO).toFixed(1);
            }
        }

        currentUnit = u;
        localStorage.setItem('athleteUnit', u);
        document.querySelectorAll('.unit-label').forEach(el => el.innerText = u);
        document.getElementById('unit-lbs').className = u==='LBS' ? 'px-4 py-1.5 text-[10px] font-bold rounded-md toggle-active' : 'px-4 py-1.5 text-[10px] font-bold rounded-md bg-neutral-900 text-neutral-500';
        document.getElementById('unit-kg').className = u==='KG' ? 'px-4 py-1.5 text-[10px] font-bold rounded-md toggle-active' : 'px-4 py-1.5 text-[10px] font-bold rounded-md bg-neutral-900 text-neutral-500';
        calculateBioAge();
    }

    function syncData() {
        const savedW = localStorage.getItem('athleteWeight');
        const savedR = localStorage.getItem('athleteReps');
        if(savedW && savedR) {
            const oneRM = savedW / (1.0278 - (0.0278 * savedR));
            document.getElementById('one-rm').value = Math.round(oneRM);
        }
    }

    function calculateBioAge() {
        const chronAge = parseInt(document.getElementById('chron-age').value);
        const bw = parseFloat(document.getElementById('bodyweight').value);
        const max = parseFloat(document.getElementById('one-rm').value);
        const lift = document.getElementById('lift-type').value;
        
        // Show/Hide DB Note
        document.getElementById('db-note').className = lift === 'db_press' ? "text-[9px] text-neutral-600 mt-2 italic" : "hidden";

        if(!bw || !max) return;

        const ratio = (max / bw).toFixed(2);
        
        // Multi-Lift Coefficients for 50+ Athletes
        const standards = {
            bench: { base: 0.85, step: 25, label: "Bench Press" },
            squat: { base: 1.10, step: 18, label: "Back Squat" },
            deadlift: { base: 1.25, step: 15, label: "Deadlift" },
            db_press: { base: 0.50, step: 40, label: "DB Shoulder Press" }
        };

        const config = standards[lift];
        let bioAge;

        if (ratio >= config.base) {
            bioAge = chronAge - ((ratio - config.base) * config.step);
        } else {
            bioAge = chronAge + ((config.base - ratio) * 12);
        }

        bioAge = Math.max(30, Math.round(bioAge));
        document.getElementById('age-display').classList.remove('hidden');
        document.getElementById('age-placeholder').classList.add('hidden');
        document.getElementById('bio-age-val').innerText = bioAge + (bioAge === 30 ? "+" : "");

        const benchmarkRange = `${(config.base - 0.05).toFixed(2)}â€“${(config.base + 0.05).toFixed(2)}`;
        let statusText = bioAge < chronAge ? "Status: Biological Outperformer" : "Status: At-Risk Baseline";
        let statusColor = bioAge < chronAge ? "text-green-400" : "text-yellow-500";
        
        document.getElementById('age-status').innerHTML = `
            <div class="${statusColor} text-xs font-bold uppercase tracking-widest mb-2">${statusText}</div>
            <p class="text-[10px] text-neutral-500 mt-2 tracking-wide uppercase leading-loose">
                ${config.label} Std (Age ${chronAge}): <span class="text-white">${benchmarkRange}</span><br>
                Your Relative Ratio: <span class="text-cyan-400 font-bold">${ratio}</span>
            </p>`;

        document.getElementById('bio-feedback').innerText = bioAge < chronAge ? 
            "Research consistently links higher relative strength with significantly lower all-cause mortality risk and improved functional longevity." : 
            "Targeting a " + config.base + " ratio on the " + config.label + " is a primary recommendation for bone density and muscle mass retention.";
    }
</script>
</body>
</html>
