function calculateBioAge() {
    const chronAge = parseInt(document.getElementById('chron-age').value);
    const bw = parseFloat(document.getElementById('bodyweight').value);
    const max = parseFloat(document.getElementById('one-rm').value);
    
    if(!bw || !max) { alert("Please enter weight and max."); return; }

    const ratio = (max / bw).toFixed(2);
    let bioAge;
    
    // Core Logic
    if (ratio >= 1.0) {
        bioAge = chronAge - ((ratio - 1.0) * 20);
    } else {
        bioAge = chronAge + ((1.0 - ratio) * 15);
    }

    bioAge = Math.max(30, Math.round(bioAge));

    document.getElementById('age-display').classList.remove('hidden');
    document.getElementById('age-placeholder').classList.add('hidden');
    document.getElementById('bio-age-val').innerText = bioAge + (bioAge === 30 ? "+" : "");

    // The Exceptional Enhancement: Contextual Benchmark
    // Providing a range based on common longevity research for the 50-65 demographic
    const benchmarkMin = 0.82;
    const benchmarkMax = 0.95;
    
    let status = "";
    let feedback = "";
    let comparisonLine = `<p class="text-[10px] text-neutral-500 mt-2 tracking-wide uppercase">
        Avg. Age ${chronAge} Relative Strength Benchmark: <span class="text-white">${benchmarkMin}â€“${benchmarkMax}</span> | Your Ratio: <span class="text-cyan-400">${ratio}</span>
    </p>`;

    if(bioAge < chronAge) {
        status = "Status: Biological Outperformer";
        feedback = "Your power-to-weight ratio is significantly higher than your age group average. Research consistently links higher relative strength with significantly lower all-cause mortality risk.";
    } else {
        status = "Status: At-Risk Baseline";
        feedback = "Your strength-to-weight ratio suggests age-related muscle loss (Sarcopenia) may be progressing. Targeting the ${benchmarkMax} ratio is a high-priority longevity goal.";
    }

    // Injecting the new comparison line into the display
    document.getElementById('age-status').innerHTML = status + comparisonLine;
    document.getElementById('age-status').className = bioAge < chronAge ? "mt-4 text-xs font-bold uppercase tracking-widest text-green-400" : "mt-4 text-xs font-bold uppercase tracking-widest text-yellow-500";
    document.getElementById('bio-feedback').innerText = feedback;
}
